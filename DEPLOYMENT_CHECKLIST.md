# 连宏整装战略管理系统 - 部署检查清单

## 🚀 部署前检查

### 1. 环境准备
- [ ] Node.js 18.x 或更高版本已安装
- [ ] npm 8.x 或更高版本已安装
- [ ] LeanCloud 账号已注册
- [ ] LeanCloud 应用已创建

### 2. 配置文件检查
- [ ] `.env` 文件已创建并配置
- [ ] LeanCloud App ID 已设置
- [ ] LeanCloud App Key 已设置
- [ ] LeanCloud Server URL 已设置
- [ ] 端口号已配置（默认3000）

### 3. 依赖安装
- [ ] 运行 `npm install` 成功
- [ ] 所有依赖包已安装
- [ ] 无安全漏洞警告

### 4. 代码检查
- [ ] 所有JavaScript文件语法正确
- [ ] CSS样式文件完整
- [ ] HTML模板文件完整
- [ ] 图片和静态资源存在

### 5. 功能测试
- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 仪表盘数据展示正常
- [ ] 数据录入功能正常
- [ ] 图表渲染正常
- [ ] 响应式设计正常

### 6. 性能检查
- [ ] 页面加载时间 < 3秒
- [ ] 资源加载正常
- [ ] 内存使用合理
- [ ] 无控制台错误

## 🔧 LeanCloud 配置

### 1. 数据表创建
在LeanCloud控制台创建以下数据表：

#### StrategyConfig 表
```javascript
{
  user: Pointer<_User),     // 关联用户
  unitPrice: Number,        // 客单价
  conversionRate: Number,   // 转化率
  visitRate: Number,        // 到店率
  grossMargin: Number,      // 毛利率
  annualTarget: Number,     // 年度目标
  seasonalDistribution: Object // 季度分解
}
```

#### WeeklyPerformance 表
```javascript
{
  user: Pointer<_User),     // 关联用户
  week: Number,             // 周次
  measurements: Number,     // 量房数
  visits: Number,           // 到店数
  signings: Number,         // 签约数
  outputValue: Number,      // 产值
  grossProfit: Number       // 毛利
}
```

### 2. 权限设置
- [ ] StrategyConfig 表权限设置为用户级
- [ ] WeeklyPerformance 表权限设置为用户级
- [ ] _User 表权限设置正确

### 3. 云函数（可选）
如果需要额外的业务逻辑，可以创建以下云函数：
- [ ] 数据统计云函数
- [ ] 邮件通知云函数
- [ ] 数据导出云函数

## 🌐 部署步骤

### 1. 本地测试
```bash
# 安装依赖
npm install

# 启动测试服务器
npm test

# 检查功能
# 访问 http://localhost:3001/test.html
```

### 2. 生产环境部署
```bash
# 使用部署脚本
./deploy.sh

# 或手动部署
lean login
lean init
lean deploy
```

### 3. 域名配置（可选）
- [ ] 自定义域名已配置
- [ ] SSL证书已安装
- [ ] DNS解析正确

## 📊 部署后验证

### 1. 功能验证
- [ ] 访问生产环境URL
- [ ] 用户注册功能测试
- [ ] 用户登录功能测试
- [ ] 数据录入功能测试
- [ ] 图表显示功能测试
- [ ] 设置保存功能测试

### 2. 性能验证
- [ ] 页面加载速度检查
- [ ] 移动端适配检查
- [ ] 浏览器兼容性检查
- [ ] 网络连接测试

### 3. 安全验证
- [ ] 用户数据隔离测试
- [ ] 权限控制测试
- [ ] 输入验证测试
- [ ] XSS防护测试

## 🔍 监控和维护

### 1. 日志监控
- [ ] 应用日志配置
- [ ] 错误日志监控
- [ ] 性能日志记录
- [ ] 用户行为日志

### 2. 数据备份
- [ ] 定期数据备份计划
- [ ] 备份数据验证
- [ ] 恢复流程测试
- [ ] 数据迁移计划

### 3. 更新维护
- [ ] 版本更新计划
- [ ] 安全补丁更新
- [ ] 功能更新流程
- [ ] 回滚计划

## 🚨 故障排除

### 常见问题
1. **应用无法启动**
   - 检查Node.js版本
   - 检查依赖安装
   - 检查端口占用

2. **数据库连接失败**
   - 检查LeanCloud配置
   - 检查网络连接
   - 检查权限设置

3. **页面显示异常**
   - 检查静态资源路径
   - 检查浏览器缓存
   - 检查控制台错误

4. **功能不工作**
   - 检查JavaScript错误
   - 检查API接口
   - 检查数据格式

### 联系支持
- 技术文档：README.md
- 测试页面：/test.html
- 性能监控：浏览器开发者工具
- 日志查看：LeanCloud控制台

## ✅ 部署完成确认

- [ ] 所有功能正常工作
- [ ] 性能指标达标
- [ ] 安全措施到位
- [ ] 监控系统运行
- [ ] 文档完整
- [ ] 团队培训完成

---

**部署日期**: ___________  
**部署人员**: ___________  
**版本号**: v1.0.0  
**环境**: 生产环境